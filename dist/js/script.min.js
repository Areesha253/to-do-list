var getTaskTemplate=t=>`
    <li class="list-group-item d-flex justify-content-between align-items-center" data-id="${t.id}">
        ${t.task}
        ${"completed"===t.status?'<span class="badge bg-success ms-2">Completed</span>':""}
        <div>
            <button class="btn btn-sm btn-success complete action-btn" data-id="${t.id}">✓</button>
            <button class="btn btn-sm btn-danger delete action-btn" data-id="${t.id}">✖</button>
        </div>
    </li>
`,loadTasks=async()=>{try{var t=(await $.getJSON("includes/functions.php")).map(getTaskTemplate).join("");$("#taskList").html(t)}catch(t){console.error("Error loading tasks:",t),showToast("Failed to load tasks!","red")}},showToast=(t,s)=>{Toastify({text:t,duration:2e3,gravity:"top",position:"left",backgroundColor:s}).showToast()},disableButtons=t=>{t.find(".action-btn").prop("disabled",!0)},enableButtons=t=>{t.find(".action-btn").prop("disabled",!1)};$("#taskForm").on("submit",async t=>{t.preventDefault();t=$("#taskInput").val().trim();try{await $.post("includes/functions.php",{task:t}),loadTasks(),$("#taskInput").val(""),showToast("Task Added Successfully","green")}catch(t){console.error("Error adding task:",t),showToast("Failed to add task!","red")}}),$("#taskList").on("click",".complete",async function(){var t=$(this).closest("li"),s=$(this).attr("data-id");disableButtons(t);try{var a=await $.post("includes/functions.php",{Status:s});"completed"===JSON.parse(a).newStatus?showToast("Task Marked as Completed!","green"):showToast("Task Marked as Not Completed!","orange"),loadTasks()}catch(t){showToast("Failed to mark task as completed!","red")}enableButtons(t)}),$("#taskList").on("click",".delete",async function(){var t=$(this).closest("li"),s=$(this).attr("data-id");disableButtons(t);try{await $.post("includes/functions.php",{delete:s}),t.remove(),showToast("Task has been Deleted!","purple")}catch(t){showToast("Failed to delete task!","red")}enableButtons(t)}),loadTasks();